<!DOCTYPE html><html lang="en" dir="ltr"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 35.2.2">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
<title>RML-IO</title>
    
    
<link rel="stylesheet" type="text/css" href="./resources/css/extras.css">
    
    
<style type="text/css">

        /* Adapted from R2RML */
        pre { 
            word-wrap:normal
        }
        pre.ex-input,
        pre.ex-mapping, 
        pre.ex-output,
        pre.ex-target,
        pre.ex-source,
        pre.ex-access {
            margin-top: 1.5em;
            padding: 1em; 
            font-size: 75%;
        }
        pre.ex-input:before,
        pre.ex-mapping:before,
        pre.ex-output:before, 
        pre.ex-target:before,
        pre.ex-source:before,
        pre.ex-access:before {
            background: white;
            display: block;
            font-family: sans-serif;
            font-size: 90%;
            margin: -1.5em 0 0.5em 0;
            padding: 0.4em 0.4em;
            width: 18em;
        }
        /* Input data example */
        pre.ex-input {
            background: #cee;
        }
        pre.ex-input,
        pre.ex-input:before {
            border: 1px solid #acc;
        }
        pre.ex-input:before {
            content: "Example input data";
        }
        /* RML mapping example */
        pre.ex-mapping {
            background: #eeb;
        }
        pre.ex-mapping,
        pre.ex-mapping:before {
            border: 1px solid #cc9;
        }
        pre.ex-mapping:before {
            content: "Example RML mapping";
        }
        /* Output RDF example */
        pre.ex-output {
            background: #cfc;
        }
        pre.ex-output,
        pre.ex-output:before {
            border: 1px solid #aca;
        }
        pre.ex-output:before {
            content: "Example output RDF";
        }
        /* Source's description example */
        pre.ex-source {
            background: #ffc8d4;
        }
        pre.ex-source,
        pre.ex-source:before {
            border: 1px solid #bbb;
        }
        pre.ex-source:before {
            content: "Example Source description";
        }
        /* Target's description example */
        pre.ex-target {
            background: #ffc8d4;
        }
        pre.ex-target,
        pre.ex-target:before {
            border: 1px solid #bbb;
        }
        pre.ex-target:before {
            content: "Example Target description";
        }
        /* Data access description example */
        pre.ex-access {
            background: #d4dddd;
        }
        pre.ex-access,
        pre.ex-access:before {
            border: 1px solid #cca;
        }
        pre.ex-access:before {
            content: "Example data access description";
        }
    
</style>
    

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="color-scheme" content="light">
<meta name="description" content="This document describes Logical Source and Logical Target
to access data sources and targets.">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#222}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#222;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "localBiblio": {
    "DCAT": {
      "title": "Data Catalog Vocabulary (DCAT) - Version 2",
      "href": "https://www.w3.org/TR/vocab-dcat/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "date": "22 February 2020",
      "id": "dcat"
    },
    "SD": {
      "title": "SPARQL 1.1 Service Description",
      "href": "https://www.w3.org/TR/sparql11-service-description/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "date": "21 March 2013",
      "id": "sd"
    },
    "VoID": {
      "title": "Describing Linked Datasets with the VoID Vocabulary",
      "href": "https://www.w3.org/TR/void/",
      "status": "W3C Interest Group Note",
      "publisher": "W3C",
      "date": "03 March 2011"
    },
    "RDF11-Concepts": {
      "title": "RDF 1.1 Concepts and Abstract Syntax",
      "href": "https://www.w3.org/TR/rdf11-concepts/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "date": "25 February 2014"
    },
    "SPARQL": {
      "title": "SPARQL 1.1 Overview",
      "href": "https://www.w3.org/TR/sparql11-overview/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "date": "21 March 2013"
    },
    "Turtle": {
      "title": "RDF 1.1 Turtle",
      "href": "https://www.w3.org/TR/turtle/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "date": "25 February 2014",
      "id": "turtle"
    },
    "N-Quads": {
      "title": "RDF 1.1 N-Quads",
      "href": "https://www.w3.org/TR/n-quads/",
      "status": "W3C Recommendation",
      "publisher": "W3C",
      "date": "25 February 2014",
      "id": "n-quads"
    },
    "RFC3986": {
      "title": "Uniform Resource Identifier (URI): Generic Syntax",
      "href": "https://tools.ietf.org/html/rfc3986",
      "status": "Internet Standard",
      "publisher": "IETF",
      "date": "March 1997"
    },
    "paper": {
      "authors": [
        "Dylan Van Assche",
        "Gerald Haesendonck",
        "Gertjan De Mulder",
        "Thomas Delva",
        "Pieter Heyvaert",
        "Ben De Meester",
        "Anastasia Dimou"
      ],
      "title": "Leveraging Web of Things W3C recommendations for knowledge graphs generation",
      "href": "https://dylanvanassche.be/publications/#icwe2021",
      "status": "In Proceedings of the 21st International Conference on Web Engineering 2021",
      "publisher": "Springer",
      "date": "11 May 2021"
    },
    "RML": {
      "title": "RDF Mapping Language (RML)",
      "href": "https://rml.io/specs/rml",
      "status": "W3C Unofficial Draft",
      "publisher": "IDLab - Ghent University - imec",
      "authors": [
        "Anastasia Dimou",
        "Miel Vander Sande",
        "Ben De Meester",
        "Pieter Heyvaert",
        "Thomas Delva"
      ],
      "date": "16 November 2022",
      "id": "rml"
    },
    "FnO": {
      "title": "Function Ontology (FnO)",
      "href": "https://w3id.org/function/spec",
      "status": "Unofficial Draft",
      "publisher": "IDLab - Ghent University - imec",
      "authors": [
        "Ben De Meester",
        "Anastasia Dimou",
        "Florian Kleedorfer"
      ],
      "date": "10 November 2021",
      "id": "fno"
    },
    "CSVW": {
      "title": "CSV on the Web: A Primer",
      "href": "https://www.w3.org/TR/tabular-data-primer/",
      "status": "W3C Working Group Note",
      "publisher": "W3C",
      "authors": [
        "Jeni Tennison"
      ],
      "date": "25 February 2016",
      "id": "csvw"
    },
    "RML-Core": {
      "title": "RML-Core",
      "href": "https://w3id.org/rml/core/spec",
      "status": "Draft Community Group Report",
      "publisher": "W3C",
      "date": "07 August 2024",
      "id": "rml-core"
    }
  },
  "doRdfa": "true",
  "processVersion": 2021,
  "specStatus": "CG-DRAFT",
  "shortName": "rml-io",
  "publishDate": "2025-02-12",
  "copyrightStart": "2021",
  "edDraftURI": "https://w3id.org/rml/io/spec",
  "editors": [
    {
      "name": "Dylan Van Assche",
      "url": "https://dylanvanassche.be",
      "company": "IDLab &ndash; Ghent University &ndash; imec",
      "orcid": "https://orcid.org/0000-0002-7195-9935",
      "companyURL": "https://knows.idlab.ugent.be/"
    }
  ],
  "formerEditors": [
    {
      "name": "Anastasia Dimou",
      "url": "https://natadimou.com/#me",
      "orcid": "https://orcid.org/0000-0003-2138-7972",
      "company": "KU Leuven",
      "companyURL": "https://dtai.cs.kuleuven.be/"
    }
  ],
  "group": "kg-construct",
  "doJsonLd": true,
  "otherLinks": [
    {
      "key": "This Version",
      "data": [
        {
          "value": "https://w3id.org/rml/io/spec/%thisDate%/",
          "href": "https://w3id.org/rml/io/spec/%thisDate%/"
        }
      ]
    },
    {
      "key": "Previous Version",
      "data": [
        {
          "value": "https://w3id.org/rml/io/spec/%prevDate%/",
          "href": "https://w3id.org/rml/io/spec/%prevDate%/"
        }
      ]
    },
    {
      "key": "Website",
      "data": [
        {
          "value": "https://www.w3.org/community/kg-construct/",
          "href": "https://www.w3.org/community/kg-construct/"
        }
      ]
    }
  ],
  "publishISODate": "2025-02-12T00:00:00.000Z",
  "generatedSubtitle": "Draft Community Group Report 12 February 2025"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/cg-draft"></head>
<body class="h-entry"><div class="head">
    
    <h1 id="title" class="title">RML-IO</h1> 
    <p id="w3c-state">
      <a href="https://www.w3.org/standards/types#reports">Draft Community Group Report</a>
      <time class="dt-published" datetime="2025-02-12">12 February 2025</time>
    </p>
    <dl>
      
      <dt>Latest published version:</dt><dd>
              <a href="https://www.w3.org/rml-io/">https://www.w3.org/rml-io/</a>
            </dd>
      <dt>Latest editor's draft:</dt><dd><a href="https://w3id.org/rml/io/spec">https://w3id.org/rml/io/spec</a></dd>
      
      
      
      
      <dt>Editor:</dt><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://dylanvanassche.be">Dylan Van Assche</a><a class="p-name orcid" href="https://orcid.org/0000-0002-7195-9935"><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
    <style>

      .st1 {
        fill: #fff;
      }
    
</style>
    <path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z" fill="#a6ce39"></path>
    <path class="st1" d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"></path>
  </svg></a> (<a class="p-org org h-org" href="https://knows.idlab.ugent.be/">IDLab – Ghent University – imec</a>)
  </dd>
      <dt>
              Former editor:
            </dt><dd class="editor p-author h-card vcard">
    <a class="u-url url p-name fn" href="https://natadimou.com/#me">Anastasia Dimou</a><a class="p-name orcid" href="https://orcid.org/0000-0003-2138-7972"><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
    <style>

      .st1 {
        fill: #fff;
      }
    
</style>
    <path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z" fill="#a6ce39"></path>
    <path class="st1" d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"></path>
  </svg></a> (<a class="p-org org h-org" href="https://dtai.cs.kuleuven.be/">KU Leuven</a>)
  </dd>
      
      
      <dt>This Version</dt><dd>
    <a href="https://w3id.org/rml/io/spec/%thisDate%/">https://w3id.org/rml/io/spec/%thisDate%/</a>
  </dd><dt>Previous Version</dt><dd>
    <a href="https://w3id.org/rml/io/spec/%prevDate%/">https://w3id.org/rml/io/spec/%prevDate%/</a>
  </dd><dt>Website</dt><dd>
    <a href="https://www.w3.org/community/kg-construct/">https://www.w3.org/community/kg-construct/</a>
  </dd>
    </dl>
    
    <p class="copyright">
          <a href="https://www.w3.org/policies/#copyright">Copyright</a>
          ©
          2021-2025
          
          the Contributors to the RML-IO
          Specification, published by the
          <a href="https://www.w3.org/groups/cg/kg-construct">Knowledge Graph Construction Community Group</a> under the
          <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable
                <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a>
                is available.
              
        </p>
    <hr title="Separator for header">
  </div>
<section id="abstract" class="introductory"><h2 id="abstract">Abstract</h2><p>This document describes <em>Logical Source</em> and <em>Logical Target</em>
to access data sources and targets.</p>
<p>A <em>Logical Source</em> is a formal model and common representation
for describing access to data sources.
A <em>Logical Target</em> is
a formal model and a common representation
for specifying how a Knowledge Graph should be exported to a given target.</p>
<p>Logical Source and Logical Target reuses existing data access descriptions
and is therefore not limited to a specific set of targets or data sources.
The current document describes the Logical Source and Logical Target concepts
through definitions and examples.</p>
<p>The version of this document is <em>DRAFT</em>.</p>
</section>

<section id="sotd" class="introductory"><h2>Status of This Document</h2><p>
      This specification was published by the
      <a href="https://www.w3.org/groups/cg/kg-construct">Knowledge Graph Construction Community Group</a>. It is not a W3C Standard nor is it
      on the W3C Standards Track.
      
            Please note that under the
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>
            there is a limited opt-out and other conditions apply.
          
      Learn more about
      <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>.
    </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#overview"><bdi class="secno">2. </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#source-vocabulary"><bdi class="secno">3. </bdi>Logical Source vocabulary</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#defining-logical-sources"><bdi class="secno">3.1 </bdi>Defining Logical Sources</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#reference-formulations"><bdi class="secno">3.1.1 </bdi>Reference formulations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#source"><bdi class="secno">3.2 </bdi>Source</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#null-values"><bdi class="secno">3.2.1 </bdi>NULL values</a></li><li class="tocline"><a class="tocxref" href="#compression-formats"><bdi class="secno">3.2.2 </bdi>Compression formats</a></li><li class="tocline"><a class="tocxref" href="#encoding-formats"><bdi class="secno">3.2.3 </bdi>Encoding formats</a></li></ol></li><li class="tocline"><a class="tocxref" href="#source-examples"><bdi class="secno">3.3 </bdi>Examples</a></li></ol></li><li class="tocline"><a class="tocxref" href="#target-vocabulary"><bdi class="secno">4. </bdi>Logical Target vocabulary</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#defining-targets"><bdi class="secno">4.1 </bdi>Defining Logical Targets</a></li><li class="tocline"><a class="tocxref" href="#target"><bdi class="secno">4.2 </bdi>Target</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#serialization-formats"><bdi class="secno">4.2.1 </bdi>Serialization formats</a></li><li class="tocline"><a class="tocxref" href="#mode"><bdi class="secno">4.2.2 </bdi>Mode</a></li><li class="tocline"><a class="tocxref" href="#compression-formats-0"><bdi class="secno">4.2.3 </bdi>Compression formats</a></li><li class="tocline"><a class="tocxref" href="#encoding-formats-0"><bdi class="secno">4.2.4 </bdi>Encoding formats</a></li><li class="tocline"><a class="tocxref" href="#relative-paths"><bdi class="secno">4.2.5 </bdi>Relative paths</a></li></ol></li><li class="tocline"><a class="tocxref" href="#target-examples"><bdi class="secno">4.3 </bdi>Examples</a></li></ol></li><li class="tocline"><a class="tocxref" href="#logical-source-in-rml"><bdi class="secno">5. </bdi>Logical Source in RML</a></li><li class="tocline"><a class="tocxref" href="#logical-target-in-rml"><bdi class="secno">6. </bdi>Logical Target in RML</a></li><li class="tocline"><a class="tocxref" href="#single-targets"><bdi class="secno">7. </bdi>Single targets</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#subject-map"><bdi class="secno">7.1 </bdi>Subject Map</a></li><li class="tocline"><a class="tocxref" href="#predicate-map"><bdi class="secno">7.2 </bdi>Predicate Map</a></li><li class="tocline"><a class="tocxref" href="#object-map"><bdi class="secno">7.3 </bdi>Object Map</a></li><li class="tocline"><a class="tocxref" href="#graph-map"><bdi class="secno">7.4 </bdi>Graph Map</a></li><li class="tocline"><a class="tocxref" href="#language-map"><bdi class="secno">7.5 </bdi>Language Map</a></li><li class="tocline"><a class="tocxref" href="#datatype-map"><bdi class="secno">7.6 </bdi>Datatype Map</a></li><li class="tocline"><a class="tocxref" href="#function-map"><bdi class="secno">7.7 </bdi>Function Map</a></li></ol></li><li class="tocline"><a class="tocxref" href="#multiple-targets"><bdi class="secno">8. </bdi>Combining multiple Targets</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#multiple-targets-same-term-map"><bdi class="secno">8.1 </bdi>Multiple Targets in the same Term Map</a></li><li class="tocline"><a class="tocxref" href="#subject-and-predicate-map"><bdi class="secno">8.2 </bdi>Subject Map and Predicate Map</a></li><li class="tocline"><a class="tocxref" href="#subject-and-object-map"><bdi class="secno">8.3 </bdi>Subject Map and Object Map</a></li><li class="tocline"><a class="tocxref" href="#predicate-and-object-map"><bdi class="secno">8.4 </bdi>Predicate Map and Object Map</a></li><li class="tocline"><a class="tocxref" href="#subject-predicate-and-object-map"><bdi class="secno">8.5 </bdi>Subject Map, Predicate Map and Object Map</a></li><li class="tocline"><a class="tocxref" href="#subject-and-graph-map"><bdi class="secno">8.6 </bdi>Subject Map and Graph Map</a></li><li class="tocline"><a class="tocxref" href="#predicate-and-graph-map"><bdi class="secno">8.7 </bdi>Predicate Map and Graph Map</a></li><li class="tocline"><a class="tocxref" href="#object-and-graph-map"><bdi class="secno">8.8 </bdi>Object Map and Graph Map</a></li><li class="tocline"><a class="tocxref" href="#language-and-graph-map"><bdi class="secno">8.9 </bdi>Language Map and Graph Map</a></li><li class="tocline"><a class="tocxref" href="#language-and-object-map"><bdi class="secno">8.10 </bdi>Language Map and Object Map</a></li><li class="tocline"><a class="tocxref" href="#multiple-predicate-map"><bdi class="secno">8.11 </bdi>Multiple Predicate Maps</a></li><li class="tocline"><a class="tocxref" href="#multiple-object-map"><bdi class="secno">8.12 </bdi>Multiple Object Maps</a></li><li class="tocline"><a class="tocxref" href="#multiple-graph-map"><bdi class="secno">8.13 </bdi>Multiple Graph Maps</a></li></ol></li><li class="tocline"><a class="tocxref" href="#overriding-targets"><bdi class="secno">9. </bdi>Overriding Targets</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#seperate-triples-map"><bdi class="secno">9.1 </bdi>Separate Triples Map</a></li><li class="tocline"><a class="tocxref" href="#conditions"><bdi class="secno">9.2 </bdi>Conditions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1 </bdi>Normative references</a></li></ol></li></ol></nav>

<section id="conformance"><div class="header-wrapper"><h2 id="x1-conformance"><bdi class="secno">1. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 1."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em> and <em class="rfc2119">MUST</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p></section>

<section id="overview-0"><div class="header-wrapper"><h2 id="overview"><bdi class="secno">2. </bdi>Overview</h2><a class="self-link" href="#overview" aria-label="Permalink for Section 2."></a></div><p><em>This section is non-normative.</em></p>
<p>This document specifies <em>Logical Source</em> and <em>Logical Target</em>,
Logical Source is a description
for specifying how a data source should be accessed.
A Logical Source description is not limited to a specific Source
which allows to access any type of Source and provides a reference formulation
to refer to data inside the Source.</p>
<p>Logical Target is
a description for defining how a generated
RDF [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf-concepts" title="Resource Description Framework (RDF): Concepts and Abstract Syntax">RDF-Concepts</a></cite>]
knowledge graph must be exported.
A Logical Target description is not tailored towards a specific Target
which allows to export the generated RDF triples to any type of Target
and provides fine-grained control over where each RDF triple is exported to.</p>
<p>Logical Source and Logical Target leverage
the access descriptions of data access
such as DCAT [<cite><a class="bibref" data-link-type="biblio" href="#bib-dcat" title="Data Catalog Vocabulary (DCAT) - Version 2">DCAT</a></cite>], SD [<cite><a class="bibref" data-link-type="biblio" href="#bib-sd" title="SPARQL 1.1 Service Description">SD</a></cite>], etc.</p>
<p>In this document, examples assume
the following namespace prefix bindings unless otherwise stated:</p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Namespace</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml</code></td>
<td><a href="http://w3id.org/rml/">http://w3id.org/rml/</a></td>
</tr>
<tr>
<td><code>formats</code></td>
<td><a href="http://www.w3.org/ns/formats/">http://www.w3.org/ns/formats/</a></td>
</tr>
<tr>
<td><code>sd</code></td>
<td><a href="http://www.w3.org/ns/sparql-service-description#">http://www.w3.org/ns/sparql-service-description#</a></td>
</tr>
<tr>
<td><code>dcat</code></td>
<td><a href="http://www.w3.org/ns/dcat#">http://www.w3.org/ns/dcat#</a></td>
</tr>
<tr>
<td><code>td</code></td>
<td><a href="https://www.w3.org/2019/wot/td#">https://www.w3.org/2019/wot/td#</a></td>
</tr>
<tr>
<td><code>hctl</code></td>
<td><a href="https://www.w3.org/2019/wot/hypermedia#">https://www.w3.org/2019/wot/hypermedia#</a></td>
</tr>
<tr>
<td><code>htv</code></td>
<td><a href="http://www.w3.org/2011/http#">http://www.w3.org/2011/http#</a></td>
</tr>
<tr>
<td><code>d2rq</code></td>
<td><a href="http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#">http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#</a></td>
</tr>
<tr>
<td><code>wotsec</code></td>
<td><a href="https://www.w3.org/2019/wot/security#">https://www.w3.org/2019/wot/security#</a></td>
</tr>
<tr>
<td><code>idsa</code></td>
<td><a href="https://w3id.org/idsa/core/">https://w3id.org/idsa/core/</a></td>
</tr>
</tbody></table>
<p>The examples are contained in pink colored boxes:</p>
<pre class="ex-source" aria-busy="false"><code class="hljs"># This box contains the example's Logical Source description.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs"># This box contains the example's Logical Target description.</code></pre></section>


<section id="logical-source-vocabulary"><div class="header-wrapper"><h2 id="source-vocabulary"><bdi class="secno">3. </bdi>Logical Source vocabulary</h2><a class="self-link" href="#source-vocabulary" aria-label="Permalink for Section 3."></a></div><p>The Logical Source vocabulary namespace is <a href="http://w3id.org/rml/">http://w3id.org/rml/</a>
and its prefix is <code>rml</code>.</p>
<p>The Logical Source vocabulary consists of 2 classes:</p>
<ol>
<li><code>rml:LogicalSource</code> describes how data of a source can be referenced.</li>
<li><code>rml:Source</code> describes how a source can be accessed, it referenced from a <code>rml:LogicalSource</code>.</li>
</ol>
<section id="defining-logical-sources-0"><div class="header-wrapper"><h3 id="defining-logical-sources"><bdi class="secno">3.1 </bdi>Defining Logical Sources</h3><a class="self-link" href="#defining-logical-sources" aria-label="Permalink for Section 3.1"></a></div><p>A <dfn id="dfn-logical-source" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Logical Source</dfn> is an <a href="https://w3id.org/rml/core/spec#dfn-abstract-logical-source">abstract logical source</a>
which specifies the access to a <a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a> to be used as
input for a <a href="https://w3id.org/rml/core/spec#dfn-triples-map">Triples Map</a>.</p>
<p>An <a data-link-type="dfn|abstract-op" href="#dfn-logical-source" class="internalDFN" id="ref-for-dfn-logical-source-1">Logical Source</a> (<code>rml:LogicalSource</code>) <em class="rfc2119">MUST</em> adhere to the properties defined for the
<a href="https://w3id.org/rml/core/spec#dfn-abstract=logical-source">abstract logical source</a>.</p>
<p>Furthermore, an <a data-link-type="dfn|abstract-op" href="#dfn-logical-source" class="internalDFN" id="ref-for-dfn-logical-source-2">Logical Source</a> <em class="rfc2119">MUST</em> have:</p>
<ul>
<li>exactly one <strong>source</strong> (<code>rml:source</code>) property which specifies how a
<a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a> is using a <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-1">Source</a> (<code>rml:Source</code>).</li>
</ul>
<p>The <a href="https://w3id.org/rml/core/spec#dfn-reference-formulation">reference formulation</a> <em class="rfc2119">MUST</em> be specified in
the case that the <a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a> is a relational database,
CSV, TSV, XML, or JSON data sources.</p>
<p>By default <code>rml:SQL2008Query</code> for databases,
<code>rml:CSV</code> for CSV and TSV data sources.
XPath for XML and JSONPath for JSON and JSONL data sources.</p>
<p>By default, the <a href="https://w3id.org/rml/core/spec#dfn-iterator">iterator</a> is considered a row,
if not specified:</p>
<ul>
<li>In the case of CSV or TSV data sources, the value of
  <code>rml:iterator</code> is considered a "row" and must not be specified.</li>
<li>In the case of XML and JSON data sources, it is a valid reference
  to an element or an object respectively considering the
  <a href="https://w3id.org/rml/core/spec#dfn-reference-formulation">reference formulation</a> specified.</li>
<li>In the case of relational databases, the value of <code>rml:iterator</code> is either
  a SQL query (<code>rml:referenceFormulation rml:SQL2008Query</code>) or the SQL table
  name (<code>rml:referenceFormulation rml:SQL2008Table</code>). For SQL table names,
  they can be converted to a SQL query using the following SQL query template:
  <code>SELECT * FROM {table}</code> where <code>{table}</code> is the table name.</li>
</ul>
<p>The Logical Source definition requires only the source (<code>rml:source</code>)
to be specified, all other properties are optional.
If a property is specified, it <em class="rfc2119">MUST</em> only occur once.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Domain</th>
<th>Range</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml:source</code></td>
<td><code>rml:LogicalSource</code></td>
<td><code>IRI</code></td>
</tr>
</tbody></table>
<figure id="fig-the-structure-of-logical-source">
  <img src="/resources/images/source-structure.png" alt="Logical Source structure">
  <figcaption><a class="self-link" href="#fig-the-structure-of-logical-source">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">The structure of <a data-link-type="dfn|abstract-op" href="#dfn-logical-source" class="internalDFN" id="ref-for-dfn-logical-source-3">Logical Source</a></span></figcaption>
</figure>

<section id="reference-formulations"><div class="header-wrapper"><h4 id="x3-1-1-reference-formulations"><bdi class="secno">3.1.1 </bdi>Reference formulations</h4><a class="self-link" href="#reference-formulations" aria-label="Permalink for Section 3.1.1"></a></div>
<p>Each <a data-link-type="dfn|abstract-op" href="#dfn-logical-source" class="internalDFN" id="ref-for-dfn-logical-source-4">Logical Source</a> has a
<a href="https://w3id.org/rml/core/spec#dfn-reference-formulation">reference formulation</a> to define how
to express a reference to elements of the data of the input
<a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a>.
Several <a href="https://w3id.org/rml/core/spec#dfn-reference-formulation">reference formulation</a>
(<code>rml:ReferenceFormulation</code>) are defined in this specification:</p>
<ul>
<li><code>rml:CSV</code>: CSV or TSV data sources</li>
<li><code>rml:JSONPath</code>: JSON documents</li>
<li><code>rml:XPath</code>: XML documents with optionally
the definition of XML namespaces used in references.
By default, no namespaces are defined.</li>
<li><code>rml:SQL2008Query</code>: SQL query for a relational database.</li>
<li><code>rml:SQL2008Table</code>: Shortcut to select all columns from a SQL table.</li>
</ul>
<p><code>rml:XPath</code> may specify zero or more
<code>rml:namespace</code> properties with a <code>rml:Namespace</code>.
A <code>rml:Namespace</code> contains the following required properties:</p>
<ul>
<li><code>rml:namespacePrefix</code>: A Literal with the prefix used for the XML namespace.</li>
<li><code>rml:namespaceURL</code>: A Literal with the URL identifying the XML namespace.</li>
</ul>
<p>These reference formulations are defined in the [<cite><a class="bibref respec-offending-element" data-link-type="biblio" href="#bib-rml-io-registry" title="Reference &quot;[RML-IO-Registry]&quot; not found." id="respec-offender-reference-rml-io-registry-not-found">RML-IO-Registry</a></cite>].</p>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#XMLNamespace&gt; a rml:LogicalSource;
     rml:source [ a rml:Source, rml:FilePath;
         rml:path "/path/to/file/data.xml";
     ];
     rml:referenceFormulation [ a rml:XPathReferenceFormulation;
       rml:namespace [ a rml:Namespace;
         rml:namespacePrefix "ex";
         rml:namespaceURL "http://example.org";
       ];
     ];
     rml:iterator "/xpath/ex:namespace/expression";
.</code></pre>

<p>Since <code>rml:source</code> is open to any IRI, you can implement your own source access
description for <a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a> that are not
covered by existing vocabularies such as paginated Web APIs which implement pagination
in a Web API specific way.</p>
</section></section><section id="source"><div class="header-wrapper"><h3 id="x3-2-source"><bdi class="secno">3.2 </bdi>Source</h3><a class="self-link" href="#source" aria-label="Permalink for Section 3.2"></a></div>
<p>A <dfn id="dfn-source" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Source</dfn> (<code>rml:Source</code>) defines how a
<a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a> should be accessed.
It complements other source descriptions
such as SD Service, CSVW Table, DCAT Distribution, etc.
to support encoding, null values, compression, and other access properties.
The properties of a <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-2">Source</a> take precedence over the properties of other source
descriptions, for example: <code>rml:encoding</code> takes precedence over <code>csvw:encoding</code>
if both are specified.</p>
<p>A <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-3">Source</a> <em class="rfc2119">MUST</em> have the following properties:</p>
<ul>
<li>zero or one <strong><code>rml:encoding</code></strong> property, which specifies the encoding
of the data inside the source. Defaults to <code>rml:UTF-8</code> if not specified.</li>
<li>zero or more <strong><code>rml:null</code></strong> describes which data values inside the source
should be considered as NULL.<br>
The value for this predicate defaults to the default NULL token
of the underlying data model (e.g., NULL in relational databases
and null in JSON) and are always processed as such.
Some data models have no such default NULL token, such as CSV.
When that is the case, then nothing is considered NULL unless specified by
<code>rml:null</code>.<br>
Example: CSV does not have a default NULL character,
so no value is considered NULL.
However, JSON has a NULL character specified: <code>null</code>,
this one is used together with the ones specified through <code>rml:null</code>.
For a relational database, <code>rml:null "foo"</code> results into the following values
considered as NULL: <code>{NULL, "foo"}</code> where <code>NULL</code> comes from the relational
database model as NULL value.</li>
<li>zero or one <strong><code>rml:compression</code></strong> specifies if the source is compressed
and the used compression algorithm. Defaults to no compression.</li>
</ul>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#JSON&gt; a rml:LogicalSource;
     rml:source [ a rml:Source, rml:FilePath;
       rml:path "/path/to/data.json.gz";
       rml:null ""; # empty string as NULL besides default null character
       rml:compression rml:gzip; # GZip compression
       rml:encoding rml:UTF-16; # UTF-16 encoding
     ];
     rml:referenceFormulation rml:JSONPath;
     rml:iterator "$.jsonpath.expression";
.</code></pre>

<table>
<thead>
<tr>
<th>Property</th>
<th>Domain</th>
<th>Range</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml:encoding</code></td>
<td><code>rml:Source</code></td>
<td><code>rml:Encoding</code></td>
</tr>
<tr>
<td><code>rml:null</code></td>
<td><code>rml:Source</code></td>
<td><code>Literal</code></td>
</tr>
<tr>
<td><code>rml:compression</code></td>
<td><code>rml:Source</code></td>
<td><code>rml:Compression</code></td>
</tr>
</tbody></table>
<section id="null-values"><div class="header-wrapper"><h4 id="x3-2-1-null-values"><bdi class="secno">3.2.1 </bdi>NULL values</h4><a class="self-link" href="#null-values" aria-label="Permalink for Section 3.2.1"></a></div>
<p>Each <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-4">Source</a> <em class="rfc2119">MAY</em> describe the values that should be considered as NULL
with <code>rml:null</code>, similar to <code>NULL</code> in relational databases.
By default, standardized NULL values are always considered,
but additional ones can be specified. Multiple NULL values are allowed.
For example, in relational databases <code>NULL</code> is always considered as a NULL
value while also an empty column can be considered as a NULL value by
specifying it through <code>rml:null</code> in a Source.</p>
</section><section id="compression-formats"><div class="header-wrapper"><h4 id="x3-2-2-compression-formats"><bdi class="secno">3.2.2 </bdi>Compression formats</h4><a class="self-link" href="#compression-formats" aria-label="Permalink for Section 3.2.2"></a></div>
<p>Each <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-5">Source</a> <em class="rfc2119">MAY</em> specify the compression with <code>rml:compression</code>
to apply when exporting RDF triples to a <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-6">Source</a> for saving storage space.
Several compression formats are defined:</p>
<ul>
<li><code>rml:none</code>: No compression is applied</li>
<li><code>rml:gzip</code>: GZip compression</li>
<li><code>rml:zip</code>: Zip archive with Zip compression</li>
<li><code>rml:tarxz</code>: Tar archive with Xz compression</li>
<li><code>rml:targz</code>: Tar archive with GZip compression</li>
</ul>
<p>If unspecified, the default value is no compression.
This namespace is NOT limited to the listed compression formats
and <em class="rfc2119">MAY</em> be extended in the future.</p>
</section><section id="encoding-formats"><div class="header-wrapper"><h4 id="x3-2-3-encoding-formats"><bdi class="secno">3.2.3 </bdi>Encoding formats</h4><a class="self-link" href="#encoding-formats" aria-label="Permalink for Section 3.2.3"></a></div>
<p>Each <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-7">Source</a> <em class="rfc2119">MAY</em> describe the encoding format to use when exporting
RDF triples to a Source. Several encoding formats are defined:</p>
<ul>
<li><code>rml:UTF-8</code>: UTF-8 encoding</li>
<li><code>rml:UTF-16</code>: UTF-16 encoding</li>
</ul>
<p>If unspecified, the default value is <code>rml:UTF-8</code>.
This namespace is NOT limited to the listed compression formats
and may be extended in the future.</p>
</section></section><section id="examples"><div class="header-wrapper"><h3 id="source-examples"><bdi class="secno">3.3 </bdi>Examples</h3><a class="self-link" href="#source-examples" aria-label="Permalink for Section 3.3"></a></div><p>The following example shows a Source of a CSV file.
RML-IO-Registry provides also support for CSVW which allows more fine-grained control
over CSV files such as delimeters, encoding, etc. but it is not required for
Processors to implement CSVW, only CSV is the minimum to be compliant with 
the RML IO module.</p>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#CSV&gt; a rml:LogicalSource;
     rml:source [ a rml:Source, rml:FilePath;
        rml:path "/path/to/data.csv";
        rml:null "NULL";
        rml:null "";
     ];
     rml:referenceFormulation rml:CSV;
.</code></pre>

<p>Note that there is no <code>rml:iterator</code> present because its default is row.
This particular CSV file has two different ways to specify a NULL value: <code>NULL</code>
or an empty value. Implementations need to check if a value is equal to one of
the values defined by <code>rml:null</code> to check for NULL values in the data.</p>
<p>The following example shows a <a data-link-type="dfn|abstract-op" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-8">Source</a> specified for a MySQL database querying
the <code>student</code> table. The database username and password are provided as well.</p>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#RDB&gt; a rml:LogicalSource;
    rml:source [ a rml:Source, d2rq:Database;
        d2rq:jdbcDSN "jdbc:mysrml://localhost/example";
        d2rq:jdbcDriver "com.mysql.jdbc.Driver";
        d2rq:username "user";
        d2rq:password "password";
    ];
    rml:iterator "SELECT * FROM student;";
    rml:referenceFormulation rml:SQL2008Query;
.</code></pre>

<p>A shortcut is available to select all columns from a table,
such as in the example above, by using the <code>rml:SQL2008Table</code>
as <code>rml:referenceFormulation</code>.</p>
<p>Relative paths to files are covered by a source access description included
in this specification which subclasses <code>rml:Source</code> as <code>rml:FilePath</code>.
This access description allows accessing files relative from:</p>
<ul>
<li><code>rml:CurrentWorkingDirectory</code>: relative to the current working directory of the RML processor.</li>
<li><code>rml:MappingDirectory</code>: relative to the location of the RML mapping.</li>
<li>A string Literal: a string describing an absolute path against which relative paths are resolved, similar to the Base URI in <a href="https://www.rfc-editor.org/rfc/rfc3986">RFC3986</a>.</li>
</ul>
<p>If <code>rml:root</code> is not specified, it defaults to <code>rml:CurrentWorkingDirectory</code>.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Domain</th>
<th>Range</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml:root</code></td>
<td><code>rml:FilePath</code></td>
<td><code>rml:CurrentWorkingDirectory</code>, <code>rml:MappingDirectory</code> or <code>Literal</code></td>
</tr>
<tr>
<td><code>rml:path</code></td>
<td><code>rml:FilePath</code></td>
<td><code>Literal</code></td>
</tr>
</tbody></table>
<p>Example of accessing a CSV file relative to the current working directory.
The file's absolute path is <code>$CURRENT_WORKING_DIR/file.csv</code> where <code>$CURRENT_WORKING_DIR</code> is
the location of the RML mapping.</p>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#RelativePathCWD&gt; a rml:LogicalSource;
  rml:source [ a rml:FilePath, rml:Source;
    rml:root rml:CurrentWorkingDirectory;
    rml:path "./file.csv";
  ];
.</code></pre>

<p>Example of accessing a JSON file relative to the path of the mapping.
The file's absolute path is <code>$MAPPING_DIR/file.json</code> where <code>$MAPPING_DIR</code> is
the location of the RML mapping.</p>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#RelativePathMapping&gt; a rml:LogicalSource;
  rml:source [ a rml:FilePath, rml:Source;
    rml:root rml:MappingDirectory;
    rml:path "./file.json";
  ];
  rml:referenceFormulation rml:JSONPath;
  rml:iterator "$";
.</code></pre>

<p>Example of accessing an XML file relative to an absolute root path
specified by a string Literal. The file's absolute path is <code>/root/file.xml</code>.</p>
<pre class="ex-source" aria-busy="false"><code class="hljs">&lt;#RelativePathLiteral&gt; a rml:LogicalSource;
  rml:source [ a rml:FilePath, rml:Source;
    rml:root "/root";
    rml:path "file.xml";
  ];
  rml:referenceFormulation rml:JSONPath;
  rml:iterator "$";
.</code></pre></section></section>

<section id="logical-target-vocabulary"><div class="header-wrapper"><h2 id="target-vocabulary"><bdi class="secno">4. </bdi>Logical Target vocabulary</h2><a class="self-link" href="#target-vocabulary" aria-label="Permalink for Section 4."></a></div><p>The LogicalTarget vocabulary namespace is <a href="http://w3id.org/rml/">http://w3id.org/rml/</a>
and it's prefix is <code>rml</code>.</p>
<p>The LogicalTarget vocabulary consists of <code>rml:LogicalTarget</code> and <code>rml:Target</code>
classes to describe how a knowledge graph must be exported after generation.</p>
<section id="defining-logical-targets"><div class="header-wrapper"><h3 id="defining-targets"><bdi class="secno">4.1 </bdi>Defining Logical Targets</h3><a class="self-link" href="#defining-targets" aria-label="Permalink for Section 4.1"></a></div><p>A Logical Target is any target to where RDF triples are exported to.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Domain</th>
<th>Range</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml:target</code></td>
<td><code>rml:LogicalTarget</code></td>
<td><code>Target</code></td>
</tr>
</tbody></table>
<ul>
<li>The target access description (<code>rml:target</code>) <em class="rfc2119">MUST</em> specify how to access
the target through an <code>rml:Target</code>.
The Target definition requires only the target (<code>rml:target</code>) to be specified,
all other properties are optional.</li>
</ul>
</section><section id="target"><div class="header-wrapper"><h3 id="x4-2-target"><bdi class="secno">4.2 </bdi>Target</h3><a class="self-link" href="#target" aria-label="Permalink for Section 4.2"></a></div>
<p>A Target describes how a target must be accessed when exporting RDF triples.
An external vocabulary such as DCAT, SD, etc. is allowed here.
If a target cannot be accessed with existing vocabulary, a custom vocabulary
can be used, for example: handling an authentication flow may be specific
for that specific target. A custom ontology can be used here to describe
this authentication flow such as <a href="https://www.w3.org/2019/wot/security">W3C Web of Things Security</a>.</p>
<p>A Target (<code>rml:Target</code>) <em class="rfc2119">MAY</em> contain the following properties:</p>
<ul>
<li>The <strong>serialization format</strong> (<code>rml:serialization</code>) <em class="rfc2119">MAY</em> specify
the serialization format for exporting a knowledge graph.
The serialization format is described using the W3C
<a href="http://www.w3.org/ns/formats/">formats</a> namespace.
By default, the serialization format is N-Quads [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-Quads</a></cite>].</li>
<li>The <strong>compression algorithm</strong> (<code>rml:compression</code>) <em class="rfc2119">MAY</em> describe
the compression algorithm to apply when exporting a knowledge graph.
By default, no compression is applied.</li>
<li>The <strong>encoding</strong> (<code>rml:encoding</code>) <em class="rfc2119">MAY</em> specify which encoding must be used
when exporting a knowledge graph.
By default, UTF-8 is used.</li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Domain</th>
<th>Range</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml:serialization</code></td>
<td><code>rml:LogicalTarget</code></td>
<td><code>formats:Format</code></td>
</tr>
<tr>
<td><code>rml:mode</code></td>
<td><code>rml:Target</code></td>
<td><code>rml:Mode</code></td>
</tr>
<tr>
<td><code>rml:compression</code></td>
<td><code>rml:Target</code></td>
<td><code>rml:Compression</code></td>
</tr>
<tr>
<td><code>rml:encoding</code></td>
<td><code>rml:Target</code></td>
<td><code>rml:Encoding</code></td>
</tr>
</tbody></table>
<figure id="fig-the-structure-of-logical-target">
  <img src="/resources/images/target-structure.png" alt="Logical Target structure">
  <figcaption><a class="self-link" href="#fig-the-structure-of-logical-target">Figure <bdi class="figno">2</bdi></a> <span class="fig-title">The structure of Logical Target</span></figcaption>
</figure>

<p>Logical Targets are the same if they are effectively equal as described in <a href="https://kg-construct.github.io/rml-core/spec/docs/#dfn-effectively-equal">RML-Core</a>.</p>
<section id="serialization-formats"><div class="header-wrapper"><h4 id="x4-2-1-serialization-formats"><bdi class="secno">4.2.1 </bdi>Serialization formats</h4><a class="self-link" href="#serialization-formats" aria-label="Permalink for Section 4.2.1"></a></div>
<p>Each Target <em class="rfc2119">MAY</em> describe the serialization format
with <code>rml:serialization</code> to use when exporting RDF triples to a Target.
The possible formats are defined in the W3C
<a href="http://www.w3.org/ns/formats/">formats</a> namespace
such as N-Quads, N-Triples, JSON-LD, Turtle, etc.
If unspecified, the default format is N-Quads [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-Quads</a></cite>].</p>
</section><section id="mode"><div class="header-wrapper"><h4 id="x4-2-2-mode"><bdi class="secno">4.2.2 </bdi>Mode</h4><a class="self-link" href="#mode" aria-label="Permalink for Section 4.2.2"></a></div>
<p>Each Target <em class="rfc2119">MAY</em> describe the operation mode when accessing a Target
with <code>rml:mode</code> to specify if the Target must be appended, overwritten, etc.
If not specified, defaults to <code>rml:Write</code>.
This property accepts the range of <code>rml:Mode</code>:</p>
<ul>
<li><code>rml:Read</code>: read-only mode (<code>r</code>). Start beginning of file. Not useful for targets. File must exist.</li>
<li><code>rml:ReadWrite</code>: read-write mode (<code>r+</code>). Start beginning of file, no truncation.  Only write part is useful for targets. File must exist.</li>
<li><code>rml:Write</code>: write mode (<code>w</code>).  Truncate/create file and start at the beginning to add new data.</li>
<li><code>rml:WriteRead</code>: write-read mode (<code>w</code>).  Truncate/create file and start at the beginning to add new data. Only write part is useful for targets</li>
<li><code>rml:Append</code>: append-only mode. Existing file is kept and new data is appended at the end. File is created if not exist.</li>
<li><code>rml:AppendRead</code>: append-read mode. Existing file is kept and new data is appended at the end. File is created if not exist.</li>
</ul>
</section><section id="compression-formats-0"><div class="header-wrapper"><h4 id="x4-2-3-compression-formats"><bdi class="secno">4.2.3 </bdi>Compression formats</h4><a class="self-link" href="#compression-formats-0" aria-label="Permalink for Section 4.2.3"></a></div>
<p>Each Target <em class="rfc2119">MAY</em> specify the compression with <code>rml:compression</code>
to apply when exporting RDF triples to a Target for saving storage space.
Several compression formats are specified by the <code>comp</code> namespace:</p>
<ul>
<li><code>rml:none</code>: No compression is applied</li>
<li><code>rml:gzip</code>: GZip compression</li>
<li><code>rml:zip</code>: Zip archive with Zip compression</li>
<li><code>rml:tarxz</code>: Tar archive with Xz compression</li>
<li><code>rml:targz</code>: Tar archive with GZip compression</li>
</ul>
<p>If unspecified, the default value is no compression.
This namespace is NOT limited to the listed compression formats
and <em class="rfc2119">MAY</em> be extended in the future.</p>
</section><section id="encoding-formats-0"><div class="header-wrapper"><h4 id="x4-2-4-encoding-formats"><bdi class="secno">4.2.4 </bdi>Encoding formats</h4><a class="self-link" href="#encoding-formats-0" aria-label="Permalink for Section 4.2.4"></a></div>
<p>Each Target <em class="rfc2119">MAY</em> describe the encoding format to use when exporting
RDF triples to a Target. Several encoding formats are defined:</p>
<ul>
<li><code>rml:UTF-8</code>: UTF-8 encoding</li>
<li><code>rml:UTF-16</code>: UTF-16 encoding</li>
</ul>
<p>If unspecified, the default value is UTF-8.
This namespace is NOT limited to the listed compression formats
and <em class="rfc2119">MAY</em> be extended in the future.</p>
</section><section id="relative-paths"><div class="header-wrapper"><h4 id="x4-2-5-relative-paths"><bdi class="secno">4.2.5 </bdi>Relative paths</h4><a class="self-link" href="#relative-paths" aria-label="Permalink for Section 4.2.5"></a></div>
<p>Relative paths to files are covered by a target access description included
in this specification which subclasses <code>rml:Target</code> as <code>rml:FilePath</code> re-used from the Logical Source.</p>
</section></section><section id="examples-0"><div class="header-wrapper"><h3 id="target-examples"><bdi class="secno">4.3 </bdi>Examples</h3><a class="self-link" href="#target-examples" aria-label="Permalink for Section 4.3"></a></div><p>The following example show a Target of an RDF dump in Turtle [<cite><a class="bibref" data-link-type="biblio" href="#bib-turtle" title="RDF 1.1 Turtle">Turtle</a></cite>]
format with GZip compression and UTF-8 encoding:</p>
<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#FileDump&gt; a rml:LogicalTarget;
    rml:target [ a rml:Target, rml:FilePath;
        rml:path "/data/dump.ttl";
        rml:compression rml:gzip;
        rml:encoding rml:UTF-8;
    ];
    rml:serialization formats:Turtle;
.</code></pre></section></section>


<section id="logical-source-in-rml-0"><div class="header-wrapper"><h2 id="logical-source-in-rml"><bdi class="secno">5. </bdi>Logical Source in RML</h2><a class="self-link" href="#logical-source-in-rml" aria-label="Permalink for Section 5."></a></div><p>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rml-core" title="RML-Core">RML-Core</a></cite>] introduces an <a href="https://w3id.org/rml/core/spec#dfn-abstract-logical-source">abstract logical source</a>
as an abstract construct to describe how a <a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a>
 can be accessed to be used in a <a href="https://w3id.org/rml/core/spec#dfn-triples-map">Triples Map</a>.</p>
<p>In this specification we introduce the <a data-link-type="dfn|abstract-op" href="#dfn-logical-source" class="internalDFN" id="ref-for-dfn-logical-source-5">Logical Source</a> to describe how an input
<a href="https://w3id.org/rml/core/spec#dfn-data-source">data source</a> can be accessed.</p>
<p>In the example below, a CSV file is transformed into a knowledge graph.
The CSV file is accessed using the [<cite><a class="bibref" data-link-type="biblio" href="#bib-csvw" title="CSV on the Web: A Primer">CSVW</a></cite>] vocabulary,
transformed into a knowledge graph using [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>] mappings,</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">id;name;nickname
0;Nathan Ford;Mastermind
1;Sophie Devereaux;Grifter
2;Eliot Spender;Hitter
3;Parker;Thief
4;Alec Hardison;Hacker</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#CSVSourceAccess&gt; a rml:Source, rml:FilePath;
  rml:root rml:CurrentWorkingDirectory;
  rml:path "./Leverage.csv";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">@base &lt;http://example.com/ns#&gt; .

&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#CSVSourceAccess&gt;;
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.com/{id}";
    rml:class foaf:Person;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname";
    ];
  ];
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs">&lt;http://example.org/0&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nathan Ford" _b0 .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Mastermind" _b0 .
&lt;http://example.org/1&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Sophie Devereaux" _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Grifter" _b0 .
&lt;http://example.org/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Eliot Spencer" _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Hitter" _b0 .
&lt;http://example.org/3&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Parker" _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Thief" _b0 .
&lt;http://example.org/4&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alec Hardison" _b0 .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Hacker" _b0 .</code></pre></section>

<section id="logical-target-in-rml-0"><div class="header-wrapper"><h2 id="logical-target-in-rml"><bdi class="secno">6. </bdi>Logical Target in RML</h2><a class="self-link" href="#logical-target-in-rml" aria-label="Permalink for Section 6."></a></div><p>RML is aligned with the Logical Target vocabulary
by extending <code>rml:TermMap</code> with the <code>rml:logicalTarget</code> property
to describe on Term Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>] level where each triple must be directed to.
A Term Map is a function that generates an RDF term
from a logical reference [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].
The result of that function is known as the term map's generated
RDF term [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf-concepts" title="Resource Description Framework (RDF): Concepts and Abstract Syntax">RDF-Concepts</a></cite>]
such as subjects, predicates, objects, named graphs and language tags.</p>
<p>Each RML processor has a default target where generated triples are exported.
Logical Targets provide a mechanism to override this default target for some
of the triples to be exported.</p>
<p>Logical Targets are defined in Term Maps. A Term Map <em class="rfc2119">MAY</em> contain
one or more <code>rml:logicalTarget</code> properties to export all triples containing
the generated term to different targets. Specifically, when generating a
triple <code>t</code>, if any of the term maps involved in the generation of <code>t</code>
contains a Logical Target <code>LT</code>, then triple <code>t</code> exported to target <code>LT</code>.
If none of those Term Maps contains a Logical Target,
then the triple <code>t</code> is sent to the default target of the RML processor.</p>
<p>Multiple Logical Targets <em class="rfc2119">MAY</em> be combined by specifying multiple Logical Targets
in the same Term Map or multiple Term Maps of the same RDF triple
(Section <a href="#multiple-targets" data-matched-text="[[[#multiple-targets]]]" class="sec-ref"><bdi class="secno">8. </bdi>Combining multiple Targets</a>).
Logical Targets <em class="rfc2119">MAY</em> be overriden by using a separate Triples Map
or conditions [<cite><a class="bibref" data-link-type="biblio" href="#bib-fno" title="Function Ontology (FnO)">FnO</a></cite>] (Section <a href="#overriding-targets" data-matched-text="[[[#overriding-targets]]]" class="sec-ref"><bdi class="secno">9. </bdi>Overriding Targets</a>).</p>
<p>If the mapping document contains no Targets,
the processor falls back to the default target,
as it is specified through the processor's
specific configuration file or command line parameters.
If a mapping document contains at least one Target,
the processor will export the triples to these Targets,
triples which do not have one or more Target(s) assigned,
are exported to the default target of the processor.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Domain</th>
<th>Range</th>
</tr>
</thead>
<tbody><tr>
<td><code>rml:logicalTarget</code></td>
<td><code>rml:TermMap</code></td>
<td><code>rml:LogicalTarget</code></td>
</tr>
</tbody></table>
<p>In the example below, a CSV file is transformed into a knowledge graph.
The CSV file is accessed using the [<cite><a class="bibref" data-link-type="biblio" href="#bib-csvw" title="CSV on the Web: A Primer">CSVW</a></cite>] vocabulary,
transformed into a knowledge graph using [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>] mappings,
and exported to two Logical Targets, which are accessed through the [<cite><a class="bibref" data-link-type="biblio" href="#bib-dcat" title="Data Catalog Vocabulary (DCAT) - Version 2">DCAT</a></cite>]
vocabulary.
The knowledge graph is exported as N-Quads to the first Target,
and as Turtle to the second Target.
The Turtle file of the second Target is also compressed using the Zip
compression algorithm.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">id;name;nickname
0;Nathan Ford;Mastermind
1;Sophie Devereaux;Grifter
2;Eliot Spender;Hitter
3;Parker;Thief
4;Alec Hardison;Hacker</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#CSVSourceAccess&gt; a rml:Source, rml:FilePath;
  rml:root rml:CurrentWorkingDirectory;
  rml:path "./Leverage.csv";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">@base &lt;http://example.com/ns#&gt; .

&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#CSVSourceAccess&gt;;
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.com/{id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
    rml:class foaf:Person;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.

&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump2&gt;;
  rml:serialization formats:Turtle;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:FilePath;
  rml:path "/data/dump1.nt";
.

&lt;#Dump2&gt; a rml:FilePath;
  rml:path "/data/dump2.ttl.zip";
  rml:compression rml:zip;
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nq
&lt;http://example.org/0&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nathan Ford" _b0 .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Mastermind" _b0 .
&lt;http://example.org/1&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Sophie Devereaux" _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Grifter" _b0 .
&lt;http://example.org/2&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Eliot Spencer" _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Hitter" _b0 .
&lt;http://example.org/3&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Parker" _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Thief" _b0 .
&lt;http://example.org/4&gt; &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://xmlns.com/foaf/0.1/Person&gt; _b0 .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alec Hardison" _b0 .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Hacker" _b0 .

# file:///data/dump2.ttl.zip
@prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; .

&lt;http://example.org/0&gt;
  foaf:name "Nathan Ford";
.
&lt;http://example.org/1&gt;
  foaf:name "Sophie Devereaux";
.
&lt;http://example.org/2&gt;
  foaf:name "Eliot Spencer";
.
&lt;http://example.org/3&gt;
  foaf:name "Parker";
.
&lt;http://example.org/4&gt;
  foaf:name "Alec Hardison";
.</code></pre></section>


<section id="single-targets-0"><div class="header-wrapper"><h2 id="single-targets"><bdi class="secno">7. </bdi>Single targets</h2><a class="self-link" href="#single-targets" aria-label="Permalink for Section 7."></a></div><p>In the following examples, the RDF triples are exported to a single Target.
In some examples, not all RDF triples have a dedicated Target assigned,
therefore, they will be exported to the default Target of the processor.</p>
<section id="subject-map-0"><div class="header-wrapper"><h3 id="subject-map"><bdi class="secno">7.1 </bdi>Subject Map</h3><a class="self-link" href="#subject-map" aria-label="Permalink for Section 7.1"></a></div><p>All triples containing the generated subject are exported
to the specified targets in the Subject Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].</p>
<p>The following example exports all triples containing
the generated subject <code>http://example.org/{id}</code>
to an RDF dump with N-Quads as serialization format and GZip compression:</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.name";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Quads;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nq.gz";
  rml:compression rml:gzip;
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs">&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Monica Geller" .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Rachel Green" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Joey Tribbiani" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Chandler Bing" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Ross Geller" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" .</code></pre>

</section><section id="predicate-map-0"><div class="header-wrapper"><h3 id="predicate-map"><bdi class="secno">7.2 </bdi>Predicate Map</h3><a class="self-link" href="#predicate-map" aria-label="Permalink for Section 7.2"></a></div><p>All triples containing the generated predicate are exported
to the specified targets in the Predicate Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].</p>
<p>The following example exports all triples containing
the generated predicate <code>foaf:name</code> to an RDF dump
with Turtle as serialization format and Zip compression:</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.name";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:Turtle;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.ttl.gz";
  rml:compression rml:gzip;
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.ttl.zip
@prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; .
@base &lt;http://example.com/ns#&gt; .

&lt;http://example.org/0&gt;
  foaf:name "Monica Geller";
.
&lt;http://example.org/1&gt;
  foaf:name "Rachel Green";
.
&lt;http://example.org/2&gt;
  foaf:name "Joey Tribbiani";
.
&lt;http://example.org/3&gt;
  foaf:name "Chandler Bing";
.
&lt;http://example.org/4&gt;
  foaf:name "Ross Geller";
.

# default target of the processor
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" .</code></pre>

</section><section id="object-map-0"><div class="header-wrapper"><h3 id="object-map"><bdi class="secno">7.3 </bdi>Object Map</h3><a class="self-link" href="#object-map" aria-label="Permalink for Section 7.3"></a></div><p>All triples containing the generated object are exported
to the specified targets in the Object Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].</p>
<p>The following example exports all triples containing
the generated object from the reference <code>name</code> to an RDF dump
with N-Triples as serialization format:</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.name";
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Monica Geller" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Rachel Green" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Joey Tribbiani" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Chandler Bing" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Ross Geller" .

# default target of the processor
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" .</code></pre>

</section><section id="graph-map-0"><div class="header-wrapper"><h3 id="graph-map"><bdi class="secno">7.4 </bdi>Graph Map</h3><a class="self-link" href="#graph-map" aria-label="Permalink for Section 7.4"></a></div><p>All triples within a named graph are exported to the specified targets
in the Graph Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].
The named graph influences to where the named graph's triples
may be exported to as the Target's serialization format must
support named graphs such as N-Quads, JSON-LD or TriG.
When a Target contains a serialization format
which does not support named graphs and a Graph Map is used,
the mapping is considered invalid.
If a named graph is spread over multiple targets,
all targets must be combined to access the complete named graph.
In case RDF triples are not within a specific named graph,
they are added to the default graph as specified
by the [<cite><a class="bibref" data-link-type="biblio" href="#bib-r2rml" title="R2RML: RDB to RDF Mapping Language">R2RML</a></cite>] specification.</p>
<p>The following example exports all triples in the named graph <code>ex:Friends</code>
to an RDF dump with N-Quads as serialization format:</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
    rml:graphMap [
      rml:logicalTarget &lt;#TargetDump1&gt;;
      rml:constant ex:Friends;
    ];
   ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.name";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nq";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" &lt;http://example.org/Friends&gt; .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" &lt;http://example.org/Friends&gt; .</code></pre>

</section><section id="language-map-0"><div class="header-wrapper"><h3 id="language-map"><bdi class="secno">7.5 </bdi>Language Map</h3><a class="self-link" href="#language-map" aria-label="Permalink for Section 7.5"></a></div><p>All triples with a language tag are exported to the specified targets
in the Language Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].</p>
<p>The following examples export all triples with a language tag
to a RDF dump with N-Triples as serialization format:</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
   ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.name";
      rml:languageMap [
        rml:logicalTarget &lt;#TargetDump1&gt;;
        rml:constant "en";
      ];
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Monica Geller"@en .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Rachel Green"@en .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Joey Tribbiani"@en .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Chandler Bing"@en .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Ross Geller"@en .

# default target of the processor
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" .</code></pre>

</section><section id="datatype-map-0"><div class="header-wrapper"><h3 id="datatype-map"><bdi class="secno">7.6 </bdi>Datatype Map</h3><a class="self-link" href="#datatype-map" aria-label="Permalink for Section 7.6"></a></div><p>All triples with a datatype are exported to the specified targets
in the Datatype Map [<cite><a class="bibref" data-link-type="biblio" href="#bib-rml" title="RDF Mapping Language (RML)">RML</a></cite>].</p>
<p>The following examples export all triples with a datatype xsd:integer
to a RDF dump with N-Triples as serialization format:</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
   ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.name";
      rml:languageMap [
        rml:constant "en";
      ];
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
      rml:datatypeMap [ a rml:DatatypeMap;
        rml:constant xsd:integer;
        rml:logicalTarget &lt;#TargetDump1&gt;;
      ]
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33"^^xsd:integer .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34"^^xsd:integer .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35"^^xsd:integer .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36"^^xsd:integer .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37"^^xsd:integer .

# default target of the processor
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Monica Geller"@en .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Rachel Green"@en .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Joey Tribbiani"@en .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Chandler Bing"@en .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Ross Geller"@en .</code></pre>

</section><section id="function-map-0"><div class="header-wrapper"><h3 id="function-map"><bdi class="secno">7.7 </bdi>Function Map</h3><a class="self-link" href="#function-map" aria-label="Permalink for Section 7.7"></a></div><pre class="ex-input" aria-busy="false"><code class="hljs">[
  {
    "id": 0,
    "name": "Monica Geller",
    "age": 33
  },
  {
    "id": 1,
    "name": "Rachel Green",
    "age": 34
  },
  {
    "id": 2,
    "name": "Joey Tribbiani",
    "age": 35
  },
  {
    "id": 3,
    "name": "Chandler Bing",
    "age": 36
  },
  {
    "id": 4,
    "name": "Ross Geller",
    "age": 37
  }
]</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Friends.json";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:JSONPath;
    rml:iterator "$.[*]";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:functionExecution &lt;#Execution&gt;;
      rml:return grel:stringOut;
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:age;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "$.age";
    ];
  ];
.

&lt;#Execution&gt; a rml:FunctionExecution;
  rml:logicalTarget &lt;#TargetDump1&gt;;
  rml:function grel:toUppercase;
  rml:input [ a rml:Input;
    rml:parameter grel:valueParam;
      rml:inputValueMap [
        rml:reference "$.name"
      ]
  ]
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Quads;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nq.gz";
  rml:compression rml:gzip;
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># dump1.nq.gz
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "MONICA GELLER" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "RACHEL GREEN" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "JOEY TRIBBIANI" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "CHANDLER BING" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "ROSS GELLER" .

# default target of the processor
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "33" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "34" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "35" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "36" .
&lt;http://example.org/4&gt; &lt;http://xmlns.com/foaf/0.1/age&gt; "37" .</code></pre></section></section>

<section id="combining-multiple-targets"><div class="header-wrapper"><h2 id="multiple-targets"><bdi class="secno">8. </bdi>Combining multiple Targets</h2><a class="self-link" href="#multiple-targets" aria-label="Permalink for Section 8."></a></div><p>Multiple Targets <em class="rfc2119">MAY</em> be specified for the same triple
in the same or multiple Term Maps.
If multiple Targets are defined in the same Term Map,
all triples containing the generated Term are exported
to all the specified Targets.
In case multiple Term Maps of the same RDF triple contain more than one Target,
the generated triples are exported to all the specified Targets.
If multiple Term Maps of an RDF triple refer multiple times to the same Target,
the RDF triple is written only once to the target to avoid duplicates.</p>
<section id="multiple-targets-in-the-same-term-map"><div class="header-wrapper"><h3 id="multiple-targets-same-term-map"><bdi class="secno">8.1 </bdi>Multiple Targets in the same Term Map</h3><a class="self-link" href="#multiple-targets-same-term-map" aria-label="Permalink for Section 8.1"></a></div><p>All triples are exported to all Targets, if the Term Map contains multiple
Targets. In the example a Subject Map has three specified Targets,
all triples with the subject <code>http://example.org/{@id}</code> are exported
to the three specified Targets:</p>
<ul>
<li>Target 1: <code>/data/dump.nt.zip</code>, N-Triples serialization, Zip compression</li>
<li>Target 2: <code>/data/dump.jsonld.tar.xz</code>, JSON-LD serialization, TarXz compression</li>
<li>Target 3: <code>/data/dump.rdf.tar.gzip</code>, RDF/XML serialization, TarGZip compression</li>
</ul>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
    rml:logicalTarget &lt;#TargetDump2&gt;;
    rml:logicalTarget &lt;#TargetDump3&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump2&gt;;
  rml:serialization formats:JSON-LD;
.
&lt;#TargetDump3&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump3&gt;;
  rml:serialization formats:RDF_XML;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt.zip";
  rml:compression rml:zip;
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.jsonld.tar.xz";
  rml:compression rml:tarxz;
.
&lt;#Dump3&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump3.rdf.tar.gz";
  rml:compression rml:targz;
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt.zip
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .

# file:///data/dump2.jsonld.tar.xz
[
  {
    "@id": "http://example.org/0",
    "http://xmlns.com/foaf/0.1/name": [
      {
        "@value": "Kara Danvers"
      }
    ]
  },
  {
    "@id": "http://example.org/1",
    "http://xmlns.com/foaf/0.1/name": [
      {
        "@value": "Alex Danvers"
      }
    ]
  },
  {
    "@id": "http://example.org/2",
    "http://xmlns.com/foaf/0.1/name": [
      {
        "@value": "J'onn J'onzz"
      }
    ]
  },
  {
    "@id": "http://example.org/3",
    "http://xmlns.com/foaf/0.1/name": [
      {
        "@value": "Nia Nal"
      }
    ]
  }
]

# file:///data/dump3.rdf.tar.gz
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:foaf="http://xmlns.com/foaf/0.1/"&gt;
  &lt;rdf:Description rdf:about="http://example.org/0"&gt;
    &lt;foaf:name&gt;Kara Danvers&lt;/foaf:name&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about="http://example.org/1"&gt;
    &lt;foaf:name&gt;Alex Danvers&lt;/foaf:name&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about="http://example.org/2"&gt;
    &lt;foaf:name&gt;J'onn J'onzz&lt;/foaf:name&gt;
  &lt;/rdf:Description&gt;
  &lt;rdf:Description rdf:about="http://example.org/3"&gt;
    &lt;foaf:name&gt;Nia Nal&lt;/foaf:name&gt;
  &lt;/rdf:Description&gt;
&lt;/rdf:RDF&gt;</code></pre>

</section><section id="subject-map-and-predicate-map"><div class="header-wrapper"><h3 id="subject-and-predicate-map"><bdi class="secno">8.2 </bdi>Subject Map and Predicate Map</h3><a class="self-link" href="#subject-and-predicate-map" aria-label="Permalink for Section 8.2"></a></div><p>All triples containing the subject <code>http://example.org/{id}</code>
are exported to <code>TargetDump1</code>
and all triples containing the predicate <code>foaf:name</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .</code></pre>

</section><section id="subject-map-and-object-map"><div class="header-wrapper"><h3 id="subject-and-object-map"><bdi class="secno">8.3 </bdi>Subject Map and Object Map</h3><a class="self-link" href="#subject-and-object-map" aria-label="Permalink for Section 8.3"></a></div><p>All triples containing the subject <code>http://example.org/{id}</code>
are exported to <code>TargetDump1</code>
and all triples containing the object reference <code>name/text()</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .</code></pre>

</section><section id="predicate-map-and-object-map"><div class="header-wrapper"><h3 id="predicate-and-object-map"><bdi class="secno">8.4 </bdi>Predicate Map and Object Map</h3><a class="self-link" href="#predicate-and-object-map" aria-label="Permalink for Section 8.4"></a></div><p>All triples containing the predicate <code>foaf:name</code>
are exported to <code>TargetDump1</code>
and all triples containing the object reference <code>nickname/text()</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Dreamer" .</code></pre>

</section><section id="subject-map-predicate-map-and-object-map"><div class="header-wrapper"><h3 id="subject-predicate-and-object-map"><bdi class="secno">8.5 </bdi>Subject Map, Predicate Map and Object Map</h3><a class="self-link" href="#subject-predicate-and-object-map" aria-label="Permalink for Section 8.5"></a></div><p>All triples containing the subject <code>http://example.org/{@id}</code>
are exported to <code>TargetDump1</code>
and all triples containing the object reference <code>nickname/text()</code> or
predicate <code>foaf:nickname</code> are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .</code></pre>

</section><section id="subject-map-and-graph-map"><div class="header-wrapper"><h3 id="subject-and-graph-map"><bdi class="secno">8.6 </bdi>Subject Map and Graph Map</h3><a class="self-link" href="#subject-and-graph-map" aria-label="Permalink for Section 8.6"></a></div><p>All triples containing the subject <code>http://example.org/{@id}</code>
are exported to <code>TargetDump1</code>
and all triples within the named graph <code>ex:Characters</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
    rml:logicalTarget &lt;#TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:graphMap [ a rml:GraphMap;
      rml:logicalTarget &lt;#TargetDump2&gt;;
      rml:constant ex:Characters;
    ];
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" _b0 .

# file:///data/dump2.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" &lt;http://example.org/Characters&gt; .</code></pre>

</section><section id="predicate-map-and-graph-map"><div class="header-wrapper"><h3 id="predicate-and-graph-map"><bdi class="secno">8.7 </bdi>Predicate Map and Graph Map</h3><a class="self-link" href="#predicate-and-graph-map" aria-label="Permalink for Section 8.7"></a></div><p>All triples containing the predicate <code>foaf:nickname</code>
are exported to <code>TargetDump1</code>
and all triples within the named graph <code>ex:Characters</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:graphMap [ a rml:GraphMap;
      rml:logicalTarget &lt;#TargetDump2&gt;;
      rml:constant ex:Characters;
    ];
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" _b0 .

# file:///data/dump2.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" &lt;http://example.org/Characters&gt; .</code></pre>

</section><section id="object-map-and-graph-map"><div class="header-wrapper"><h3 id="object-and-graph-map"><bdi class="secno">8.8 </bdi>Object Map and Graph Map</h3><a class="self-link" href="#object-and-graph-map" aria-label="Permalink for Section 8.8"></a></div><p>All triples containing the object reference <code>nickname/text()</code>
are exported to <code>TargetDump1</code>
and all triples within the named graph <code>ex:Characters</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:graphMap [ a rml:GraphMap;
      rml:logicalTarget &lt;#TargetDump2&gt;;
      rml:constant ex:Characters;
    ];
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" _b0 .

# file:///data/dump2.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" &lt;http://example.org/Characters&gt; .</code></pre>


</section><section id="language-map-and-graph-map"><div class="header-wrapper"><h3 id="language-and-graph-map"><bdi class="secno">8.9 </bdi>Language Map and Graph Map</h3><a class="self-link" href="#language-and-graph-map" aria-label="Permalink for Section 8.9"></a></div><p>All triples containing the language tag <code>en</code>
are exported to <code>TargetDump1</code>
and all triples within the named graph <code>ex:Characters</code>
are exported to <code>TargetDump2</code>.
The other triples are exported to the default target of the processor
as there is no dedicated Target assigned to triples containing
<code>foaf:nickname</code> as predicate.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:graphMap [ a rml:GraphMap;
      rml:logicalTarget &lt;#TargetDump2&gt;;
      rml:constant ex:Characters;
    ];
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
      rml:languageMap [
        rml:logicalTarget &lt;#TargetDump1&gt;;
        rml:constant "en";
      ];
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers"@en &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers"@en &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz"@en &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal"@en &lt;http://example.org/Characters&gt; .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers"@en &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers"@en &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz"@en &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal"@en &lt;http://example.org/Characters&gt; .

# default target of processor
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" _b0 .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" _b0 .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" _b0 .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" _b0 .</code></pre>

</section><section id="language-map-and-object-map"><div class="header-wrapper"><h3 id="language-and-object-map"><bdi class="secno">8.10 </bdi>Language Map and Object Map</h3><a class="self-link" href="#language-and-object-map" aria-label="Permalink for Section 8.10"></a></div><p>All triples containing the language tag <code>en</code>
are exported to <code>TargetDump1</code>
and all triples containing the object reference <code>nickname/text()</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
      rml:languageMap [
        rml:logicalTarget &lt;#TargetDump1&gt;;
        rml:constant "en";
      ];
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers"@en .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers"@en .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz"@en .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal"@en .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" .</code></pre>

</section><section id="multiple-predicate-maps"><div class="header-wrapper"><h3 id="multiple-predicate-map"><bdi class="secno">8.11 </bdi>Multiple Predicate Maps</h3><a class="self-link" href="#multiple-predicate-map" aria-label="Permalink for Section 8.11"></a></div><p>All triples containing the predicate <code>foaf:name</code>
are exported to <code>TargetDump1</code>
and all triples containing the predicate <code>foaf:nickname</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" .</code></pre>

</section><section id="multiple-object-maps"><div class="header-wrapper"><h3 id="multiple-object-map"><bdi class="secno">8.12 </bdi>Multiple Object Maps</h3><a class="self-link" href="#multiple-object-map" aria-label="Permalink for Section 8.12"></a></div><p>All triples containing the object reference <code>name/text()</code>
are exported to <code>TargetDump1</code>
and all triples containing the object reference <code>nickname/text()</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
      rml:logicalTarget &lt;#TargetDump1&gt;;
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
      rml:logicalTarget &lt;#TargetDump2&gt;;
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" .

# file:///data/dump2.nt
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" .</code></pre>

</section><section id="multiple-graph-maps"><div class="header-wrapper"><h3 id="multiple-graph-map"><bdi class="secno">8.13 </bdi>Multiple Graph Maps</h3><a class="self-link" href="#multiple-graph-map" aria-label="Permalink for Section 8.13"></a></div><p>All triples within the named graph <code>ex:Characters</code>
are exported to <code>TargetDump1</code>
and all triples within the named graph <code>ex:NickNames</code>
are exported to <code>TargetDump2</code>.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs">&lt;Supergirl&gt;
  &lt;Character id="0"&gt;
    &lt;name&gt;Kara Danvers&lt;/name&gt;
    &lt;nickname&gt;Supergirl&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="1"&gt;
    &lt;name&gt;Alex Danvers&lt;/name&gt;
    &lt;nickname&gt;Sentinel&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="2"&gt;
    &lt;name&gt;J'onn J'onzz&lt;/name&gt;
    &lt;nickname&gt;Martian Manhunter&lt;/nickname&gt;
  &lt;/Character&gt;
  &lt;Character id="3"&gt;
    &lt;name&gt;Nia Nal&lt;/name&gt;
    &lt;nickname&gt;Dreamer&lt;/nickname&gt;
  &lt;/Character&gt;
&lt;/Supergirl&gt;</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "Supergirl.xml";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:XPath;
    rml:iterator "//Supergirl/Character/";
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:template "http://example.org/{@id}";
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:graphMap [ a rml:GraphMap;
      rml:logicalTarget &lt;#TargetDump1&gt;;
      rml:constant ex:Characters;
    ];
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name/text()";
    ];
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:graphMap [ a rml:GraphMap;
      rml:logicalTarget &lt;#TargetDump2&gt;;
      rml:constant ex:NickNames;
    ];
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:nickname;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "nickname/text()";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kara Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Alex Danvers" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "J'onn J'onzz" &lt;http://example.org/Characters&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Nia Nal" &lt;http://example.org/Characters&gt; .

# file:///data/dump2.nq
&lt;http://example.org/0&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Supergirl" &lt;http://example.org/Nicknames&gt; .
&lt;http://example.org/1&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Sentinel" &lt;http://example.org/Nicknames&gt; .
&lt;http://example.org/2&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Martian Manhunter" &lt;http://example.org/Nicknames&gt; .
&lt;http://example.org/3&gt; &lt;http://xmlns.com/foaf/0.1/nickname&gt; "Dreamer" &lt;http://example.org/Nicknames&gt; .</code></pre></section></section>

<section id="overriding-targets-0"><div class="header-wrapper"><h2 id="overriding-targets"><bdi class="secno">9. </bdi>Overriding Targets</h2><a class="self-link" href="#overriding-targets" aria-label="Permalink for Section 9."></a></div><p>In some cases exporting all triples to a target is not desired,
therefore Targets can be overridden when needed
by either using a separate Triples Map which isolates certain triples or
by using FnO functions [<cite><a class="bibref" data-link-type="biblio" href="#bib-fno" title="Function Ontology (FnO)">FnO</a></cite>] as conditions.</p>
<section id="separate-triples-map"><div class="header-wrapper"><h3 id="seperate-triples-map"><bdi class="secno">9.1 </bdi>Separate Triples Map</h3><a class="self-link" href="#seperate-triples-map" aria-label="Permalink for Section 9.1"></a></div><p>Triples can be exported to a specific Target while not to other Targets
by isolating these triples in a separate Triples Map.</p>
<p>In this example, the same subject and object are used in both Triples Maps,
but with a diffent predicate. The triples with the first predicate <code>foaf:name</code>
are exported to the first Target and the triples with the second predicate
<code>schema:name</code> to the second Target.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs"># DBPedia Friends actors as CSV
actor,name,nickname
http://dbpedia.org/resource/Kevin_Sussman,Kevin Sussman
http://dbpedia.org/resource/Jim_Parsons,Jim Parsons
http://dbpedia.org/resource/Kaley_Cuoco,Kaley Cuoco
http://dbpedia.org/resource/Sara_Gilbert,Sara Gilbert
http://dbpedia.org/resource/Kunal_Nayyar,Kunal Nayyar
http://dbpedia.org/resource/Laura_Spencer_(actress),Laura Spencer
http://dbpedia.org/resource/Simon_Helberg,Simon Helberg
http://dbpedia.org/resource/Johnny_Galecki,Johnny Galecki
http://dbpedia.org/resource/Mayim_Bialik,Mayim Bialik
http://dbpedia.org/resource/Melissa_Rauch,Melissa Rauch</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "FriendsDBPedia.csv";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap1&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:CSV;
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:reference "actor";
    rml:termType rml:IRI;
    rml:logicalTarget &lt;TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name";
    ];
  ];

&lt;#TriplesMap2&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;#SourceAccess&gt;;
    rml:referenceFormulation rml:CSV;
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:reference "actor";
    rml:termType rml:IRI;
    rml:logicalTarget &lt;TargetDump2&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant schema:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name";
    ];
  ];
.</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump2&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://dbpedia.org/resource/Kevin_Sussman&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kevin Sussman" .
&lt;http://dbpedia.org/resource/Jim_Parsons&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Jim Parsons" .
&lt;http://dbpedia.org/resource/Kaley_Cuoco&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kaley Cuoco" .
&lt;http://dbpedia.org/resource/Sara_Gilbert&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Sara Gilbert" .
&lt;http://dbpedia.org/resource/Kunal_Nayyar&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kunal Nayyar" .
&lt;http://dbpedia.org/resource/Laura_Spencer&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Laura Spencer" .
&lt;http://dbpedia.org/resource/Simon_Helberg&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Simon Helberg" .
&lt;http://dbpedia.org/resource/Johnny_Galecki&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Johnny Galecki" .
&lt;http://dbpedia.org/resource/Mayim_Bialik&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Mayim Bialik" .
&lt;http://dbpedia.org/resource/Melissa_Rauch&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Melissa Rauch" .

# file:///data/dump2.nt
&lt;http://dbpedia.org/resource/Kevin_Sussman&gt; &lt;http://schema.org/name&gt; "Kevin Sussman" .
&lt;http://dbpedia.org/resource/Jim_Parsons&gt; &lt;http://schema.org/name&gt; "Jim Parsons" .
&lt;http://dbpedia.org/resource/Kaley_Cuoco&gt; &lt;http://schema.org/name&gt; "Kaley Cuoco" .
&lt;http://dbpedia.org/resource/Sara_Gilbert&gt; &lt;http://schema.org/name&gt; "Sara Gilbert" .
&lt;http://dbpedia.org/resource/Kunal_Nayyar&gt; &lt;http://schema.org/name&gt; "Kunal Nayyar" .
&lt;http://dbpedia.org/resource/Laura_Spencer&gt; &lt;http://schema.org/name&gt; "Laura Spencer" .
&lt;http://dbpedia.org/resource/Simon_Helberg&gt; &lt;http://schema.org/name&gt; "Simon Helberg" .
&lt;http://dbpedia.org/resource/Johnny_Galecki&gt; &lt;http://schema.org/name&gt; "Johnny Galecki" .
&lt;http://dbpedia.org/resource/Mayim_Bialik&gt; &lt;http://schema.org/name&gt; "Mayim Bialik" .
&lt;http://dbpedia.org/resource/Melissa_Rauch&gt; &lt;http://schema.org/name&gt; "Melissa Rauch" .</code></pre>

</section><section id="conditions-0"><div class="header-wrapper"><h3 id="conditions"><bdi class="secno">9.2 </bdi>Conditions</h3><a class="self-link" href="#conditions" aria-label="Permalink for Section 9.2"></a></div><p>FnO functions <em class="rfc2119">MAY</em> be leveraged to export triples
only under certain conditions.
Conditions are already integrated in RML+FnO processors,
thus conditions apply on Targets as well.
Triples are generated and exported based on the FnO condition's evaluation.
Only if the condition is true, the triples are generated and exported.</p>
<p>In the example, the triples with <code>Jim Parsons</code> as object are exported
to the first Target, triples with <code>Kaley Cuoco</code> as object are exported
to the second Target.</p>
<pre class="ex-input" aria-busy="false"><code class="hljs"># DBPedia Friends actors as CSV
actor,name,nickname
http://dbpedia.org/resource/Kevin_Sussman,Kevin Sussman
http://dbpedia.org/resource/Jim_Parsons,Jim Parsons
http://dbpedia.org/resource/Kaley_Cuoco,Kaley Cuoco
http://dbpedia.org/resource/Sara_Gilbert,Sara Gilbert
http://dbpedia.org/resource/Kunal_Nayyar,Kunal Nayyar
http://dbpedia.org/resource/Laura_Spencer_(actress),Laura Spencer
http://dbpedia.org/resource/Simon_Helberg,Simon Helberg
http://dbpedia.org/resource/Johnny_Galecki,Johnny Galecki
http://dbpedia.org/resource/Mayim_Bialik,Mayim Bialik
http://dbpedia.org/resource/Melissa_Rauch,Melissa Rauch</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#SourceAccess&gt; a rml:Source, rml:FilePath;
  rml:path "FriendsDBPedia.csv";
.</code></pre>

<pre class="ex-mapping" aria-busy="false"><code class="hljs">&lt;#TriplesMap&gt; a rml:TriplesMap;
  rml:logicalSource [ a rml:LogicalSource;
    rml:source &lt;SourceAccess&gt;;
    rml:referenceFormulation rml:CSV;
  ];
  rml:subjectMap [ a rml:SubjectMap;
    rml:reference "actor";
    rml:termType rml:IRI;
    rml:logicalTarget &lt;TargetDump1&gt;;
  ];
  rml:predicateObjectMap [ a rml:PredicateObjectMap;
    rml:predicateMap [ a rml:PredicateMap;
      rml:constant foaf:name;
    ];
    rml:objectMap [ a rml:ObjectMap;
      rml:reference "name";
    ];
  ];
  rml:predicateObjectMap [
    rml:predicateMap [ rml:constant foaf:name ];
    rml:objectMap [
      fnml:functionValue [
        rml:predicateObjectMap [
          rml:predicate fno:executes ;
          rml:objectMap [ rml:constant idlab-fn:decide ]
        ];
        rml:predicateObjectMap [
          rml:predicate idlab-fn:expectedStr ;
          rml:objectMap [ rml:constant "Jim Parsons"]
        ];
        rml:predicateObjectMap [
          rml:predicate idlab-fn:str ;
          rml:objectMap [
            rml:reference "name";
            rml:logicalTarget &lt;#TargetDump1&gt;;
          ];
        ];
      ];
    ];
  ];
  rml:predicateObjectMap [
    rml:predicateMap [ rml:constant foaf:name ];
    rml:objectMap [
      fnml:functionValue [
        rml:predicateObjectMap [
          rml:predicate fno:executes ;
          rml:objectMap [ rml:constant idlab-fn:decide ]
        ];
        rml:predicateObjectMap [
          rml:predicate idlab-fn:expectedStr ;
          rml:objectMap [ rml:constant "Kaley Cuoco"]
        ];
        rml:predicateObjectMap [
          rml:predicate idlab-fn:str ;
          rml:objectMap [
            rml:reference "name";
            rml:logicalTarget &lt;#TargetDump2&gt;;
          ];
        ];
      ];
    ];
  ];</code></pre>

<pre class="ex-target" aria-busy="false"><code class="hljs">&lt;#TargetDump1&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump1&gt;;
  rml:serialization formats:N-Triples;
.
&lt;#TargetDump2&gt; a rml:LogicalTarget;
  rml:target &lt;#Dump2&gt;;
  rml:serialization formats:N-Triples;
.</code></pre>

<pre class="ex-access" aria-busy="false"><code class="hljs">&lt;#Dump1&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump1.nt";
.
&lt;#Dump2&gt; a rml:Target, rml:FilePath;
  rml:path "/data/dump2.nt";
.</code></pre>

<pre class="ex-output" aria-busy="false"><code class="hljs"># file:///data/dump1.nt
&lt;http://dbpedia.org/resource/Jim_Parsons&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Jim Parsons" .

# file:///data/dump2.nt
&lt;http://dbpedia.org/resource/Kaley_Cuoco&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; "Kaley Cuoco" .</code></pre></section></section>



<section id="references" class="appendix"><div class="header-wrapper"><h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix A."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix A.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-csvw">[CSVW]</dt><dd>
      <a href="https://www.w3.org/TR/tabular-data-primer/"><cite>CSV on the Web: A Primer</cite></a>. Jeni Tennison.  W3C. 25 February 2016. W3C Working Group Note. URL: <a href="https://www.w3.org/TR/tabular-data-primer/">https://www.w3.org/TR/tabular-data-primer/</a>
    </dd><dt id="bib-dcat">[DCAT]</dt><dd>
      <a href="https://www.w3.org/TR/vocab-dcat/"><cite>Data Catalog Vocabulary (DCAT) - Version 2</cite></a>.  W3C. 22 February 2020. W3C Recommendation. URL: <a href="https://www.w3.org/TR/vocab-dcat/">https://www.w3.org/TR/vocab-dcat/</a>
    </dd><dt id="bib-fno">[FnO]</dt><dd>
      <a href="https://w3id.org/function/spec"><cite>Function Ontology (FnO)</cite></a>. Ben De Meester; Anastasia Dimou; Florian Kleedorfer.  IDLab - Ghent University - imec. 10 November 2021. Unofficial Draft. URL: <a href="https://w3id.org/function/spec">https://w3id.org/function/spec</a>
    </dd><dt id="bib-n-quads">[N-Quads]</dt><dd>
      <a href="https://www.w3.org/TR/n-quads/"><cite>RDF 1.1 N-Quads</cite></a>.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/n-quads/">https://www.w3.org/TR/n-quads/</a>
    </dd><dt id="bib-r2rml">[R2RML]</dt><dd>
      <a href="https://www.w3.org/TR/r2rml/"><cite>R2RML: RDB to RDF Mapping Language</cite></a>. Souripriya Das; Seema Sundara; Richard Cyganiak.  W3C. 27 September 2012. W3C Recommendation. URL: <a href="https://www.w3.org/TR/r2rml/">https://www.w3.org/TR/r2rml/</a>
    </dd><dt id="bib-rdf-concepts">[RDF-Concepts]</dt><dd>
      <a href="https://www.w3.org/TR/rdf-concepts/"><cite>Resource Description Framework (RDF): Concepts and Abstract Syntax</cite></a>. Graham Klyne; Jeremy Carroll.  W3C. 10 February 2004. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf-concepts/">https://www.w3.org/TR/rdf-concepts/</a>
    </dd><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd><dt id="bib-rml">[RML]</dt><dd>
      <a href="https://rml.io/specs/rml"><cite>RDF Mapping Language (RML)</cite></a>. Anastasia Dimou; Miel Vander Sande; Ben De Meester; Pieter Heyvaert; Thomas Delva.  IDLab - Ghent University - imec. 16 November 2022. W3C Unofficial Draft. URL: <a href="https://rml.io/specs/rml">https://rml.io/specs/rml</a>
    </dd><dt id="bib-rml-core">[RML-Core]</dt><dd>
      <a href="https://w3id.org/rml/core/spec"><cite>RML-Core</cite></a>.  W3C. 07 August 2024. Draft Community Group Report. URL: <a href="https://w3id.org/rml/core/spec">https://w3id.org/rml/core/spec</a>
    </dd><dt id="bib-rml-io-registry">[RML-IO-Registry]</dt><dd>
      <em class="respec-offending-element">Reference not found.</em>
    </dd><dt id="bib-sd">[SD]</dt><dd>
      <a href="https://www.w3.org/TR/sparql11-service-description/"><cite>SPARQL 1.1 Service Description</cite></a>.  W3C. 21 March 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/sparql11-service-description/">https://www.w3.org/TR/sparql11-service-description/</a>
    </dd><dt id="bib-turtle">[Turtle]</dt><dd>
      <a href="https://www.w3.org/TR/turtle/"><cite>RDF 1.1 Turtle</cite></a>.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/turtle/">https://www.w3.org/TR/turtle/</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-logical-source" aria-label="Links in this document to definition: Logical Source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-logical-source" aria-label="Permalink for definition: Logical Source. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-logical-source-1" title="§ 3.1 Defining Logical Sources">§ 3.1 Defining Logical Sources</a> <a href="#ref-for-dfn-logical-source-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-logical-source-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-logical-source-4" title="§ 3.1.1 Reference formulations">§ 3.1.1 Reference formulations</a> 
    </li><li>
      <a href="#ref-for-dfn-logical-source-5" title="§ 5. Logical Source in RML">§ 5. Logical Source in RML</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-source" aria-label="Links in this document to definition: Source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-source" aria-label="Permalink for definition: Source. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-source-1" title="§ 3.1 Defining Logical Sources">§ 3.1 Defining Logical Sources</a> 
    </li><li>
      <a href="#ref-for-dfn-source-2" title="§ 3.2 Source">§ 3.2 Source</a> <a href="#ref-for-dfn-source-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-source-4" title="§ 3.2.1 NULL values">§ 3.2.1 NULL values</a> 
    </li><li>
      <a href="#ref-for-dfn-source-5" title="§ 3.2.2 Compression formats">§ 3.2.2 Compression formats</a> <a href="#ref-for-dfn-source-6" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-source-7" title="§ 3.2.3 Encoding formats">§ 3.2.3 Encoding formats</a> 
    </li><li>
      <a href="#ref-for-dfn-source-8" title="§ 3.3 Examples">§ 3.3 Examples</a> 
    </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>